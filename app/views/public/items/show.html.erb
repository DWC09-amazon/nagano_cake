<div class="container mt-4">

  <div class="row">
    <div class="col-md-3">
      <table class="table table-bordered bg-light">
        <thead>
          <tr class="table-active">
            <th class="h5">ジャンル検索</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><%= link_to "全商品", items_path, class: 'text-dark' %></td>
          </tr>
          
          <% @genres.each do |genre| %>
            <tr>
              <td>
                <%= link_to genre.name, items_path(genre_id: genre.id), class: 'text-dark' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <div class="col-md-9">
      <div class="row">
        <div class="col-md-5">
          <%= image_tag @item.get_item_image(300, 300), class: "img-fluid rounded" %>
        </div>

        <div class="col-md-7">
          <h2 class="font-weight-bold mb-3"><%= @item.name %></h2>
          <p class="mb-4"><%= @item.introduction %></p>
          
          <p class="h4 font-weight-bold mb-4">
            ¥<%= @item.tax_included_price.to_s(:delimited) %> (税込)
          </p>

          <% if @item.is_active? %>
            <%= form_with model: @cart_item, url: cart_items_path, method: :post, local: true do |f| %>
              <%= f.hidden_field :item_id, value: @item.id %>
              
              <div class="d-flex align-items-center">
                <%= f.select :amount, (1..10).to_a, { prompt: "個数選択" }, 
                             class: "custom-select custom-select-sm w-auto mr-3" %>
                
                <%= f.submit "カートに入れる", class: "btn btn-success" %>
              </div>
            <% end %>
          <% else %>
            <p><span class="text-secondary h5">販売停止中です</span></p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>